doctype
html(lang='en')
    head
        include head.pug
            - var i=0;
            mixin rowsTable(name, ques, ans, time)
                tr
                    td #{name}
                    td #{ques}
                    td #{ans}
                    td #{time}
    body
        div.uk-container
            include header.pug
        div.uk-container.main
            div(uk-grid)
                div(class="uk-width-1-6@m side-menu")
                    include menu.pug
                div(class="uk-width-5-6@m uk-card uk-card-default uk-card-body")
                    div(uk-grid)
                        div(class="uk-width-1-3@m")
                            h3 @ #{curManager}
                            p Отправлено сообщений в группах: #{countAllMes.rows[0].count}
                            p Отправлено сообщений в лс: #{countAllMesLs.rows[0].count}
                            //p Ответов: #{countAns}
                            //p Ср. время ответа: #{srTime}
                        div(class="uk-width-2-3@m")
                            div#dinamics
                                script.
                                    Highcharts.chart('dinamics', {
                                        chart: {
                                            type: 'area'
                                        },
                                        title: {
                                            text: 'Статистика ответов'
                                        },
                                        colors: ['#552BBD'],
                                        xAxis: {
                                            allowDecimals: false,
                                            title: {
                                                text: 'Месяцы'
                                            },
                                            categories: ['Январь', 'Февраль', 'Март', 'Апрель', 'Май', 'Июнь', 'Июль', 'Август', 'Сентябрь', 'Октябрь', 'Ноябрь', 'Декабрь']


                                        },
                                        yAxis: {
                                            title: {
                                                text: 'Количество ответов'
                                            },
                                            labels: {
                                                formatter: function () {
                                                    return this.value;
                                                }
                                            }
                                        },

                                        tooltip: {

                                            pointFormat: '<tr><td style="color: {series.color}">{point.y} </td>' +
                                            '<td style="text-align: right"><b>ответов</b></td></tr>'
                                        },
                                        plotOptions: {
                                            area: {
                                                pointStart: 0,
                                                marker: {
                                                    enabled: false,
                                                    symbol: 'circle',
                                                    radius: 2,
                                                    states: {
                                                        hover: {
                                                            enabled: true
                                                        }
                                                    }
                                                }
                                            }
                                        },
                                        series: [{
                                            name: 'Отзывчивость :)',
                                            data: #{months}
                                        }]
                                    });
                    div.uk-overflow-auto
                        table.uk-table.uk-table-hover.uk-table-middle.uk-table-divider
                            thead
                                tr
                                    th Проект
                                    th Вопрос
                                    th Ответ
                                    th Время ответа
                            tbody
                                -for (var i = 0; i < projectsCount; i++)
                                    +rowsTable(projectNames[i].rows[0].name, messget[i].rows[0].count, messsend[i].rows[0].count, timeresp[i].rows[0].avg)


        include footer.pug




